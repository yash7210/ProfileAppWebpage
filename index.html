<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>User Information from Profile App</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        .banner {
            background-color: #d991e1;
            padding: 10px;
            text-align: center;
        }
        .logo {
            width: 100px;
            height: 100px;
        }
        table, th, td {
  border: 1px solid black;
  border-radius: 10px;
}
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            background-color: #d991e1;
            color: white;
        }
        th, td {
            padding: 15px;
            text-align: left;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:nth-child(odd) {
            background-color: #ffffff;
        }
        th {
            background-color: #d991e1;
            color: white;
        }
    </style>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5GRHD7JQ');</script>
<!-- End Google Tag Manager -->
</head>
<body>
    <div class="banner">
        <img src="https://i.ibb.co/tchmqh5/yashgram-high-resolution-logo-transparent.jpg" alt="yashgram-high-resolution-logo-transparent" , height="60", width="100">
        <h1>Welcome to the Yashgram Profile Webpage</h1>
    </div>
    <div id="userprofile">

    </div>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyA7mpZ7_5TihPoH7zood4ams0WgRakAQvM",
          authDomain: "profileapp-1058c.firebaseapp.com",
          databaseURL: "https://profileapp-1058c-default-rtdb.firebaseio.com",
          projectId: "profileapp-1058c",
          storageBucket: "profileapp-1058c.appspot.com",
          messagingSenderId: "350518723834",
          appId: "1:350518723834:web:4bf8c530db26a947aab543",
          measurementId: "G-PYT5GBY6CJ"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        import { getDatabase, ref, get, child} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
        const db = getDatabase();

        let userprofile = document.getElementById('userprofile');

        function GetUserProfile() {
            const dbref = ref(db);

            const userIds = ['m1m4hmZ8x1Yvyy7YabCBeHWMqL12', 'vfrMdC227PYhgTkgPu5Bka3MI6G2'];

            userIds.forEach(userId => {
                get(child(dbref, userId)).then((snapshot) => {
                    if (snapshot.exists()) {
                        console.log(snapshot.val());

                        const userProfile = snapshot.val();
                        let tableHtml = '<table>';
                            tableHtml += '<tr>';
            
                                tableHtml += '<th>Image</th>'
                                tableHtml += '<th>Fav Movie</th>'
                                tableHtml += '<th>Name</th>'
                                tableHtml += '<th>Fav Song</th>'
                                tableHtml += '<th>Zodiac</th>'
                             tableHtml += '</tr>';
                        tableHtml += '<tr>';
                        for (const property in userProfile) {
                            if (userProfile.hasOwnProperty(property)) {
                                if (property === 'image') {
                                    tableHtml += '<td><img src="' + userProfile[property] + '" style="width:60px;height:60px;"></td>';
                                } else {
                                    tableHtml += '<td>' + userProfile[property] + '</td>';
                                }
                            }
                        }
                        tableHtml += '</tr>';

                        

                        tableHtml += '</table>';
                        userprofile.innerHTML += tableHtml;
                        
                    } else {
                        console.log("No data available");
                    }
                }).catch((error) => {
                    console.error(error);
                });
            });
        }
        window.addEventListener('load', GetUserProfile);
      </script>
              <iframe src="https://thunkable.site/w/J2VxsGOjWEMx1IX32-f3b" title="Chop Down the Tree Thunkable App" height = 1000 width = 500></iframe>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5GRHD7JQ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
</body>
</html>>
